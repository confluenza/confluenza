{"componentChunkName":"component---gatsby-theme-confluenza-src-templates-markdown-template-js","path":"/developers/contributing/","result":{"data":{"site":{"siteMetadata":{"title":"Confluenza","editBaseUrl":"https://github.com/confluenza/confluenza/blob/master"}},"config":{"nodes":[{"tag":"user","title":"User Documentation"},{"tag":"developer","title":"Developer Documentation"},{"tag":"other","title":"Other Documents"},{"tag":"demo1","title":"Demo Workspace 1"},{"tag":"demo2","title":"Demo Workspace 2"},{"tag":"package","title":"Packages"}]},"doc":{"html":"","fileAbsolutePath":"/home/runner/work/confluenza/confluenza/workspaces/homepage/src/pages/developers/02-Contributing.md","frontmatter":{"title":"Contributing","content":{"childMarkdownRemark":{"html":"<h1 id=\"contributing\" style=\"position:relative;\"><a href=\"#contributing\" aria-label=\"contributing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contributing</h1>\n<blockquote>\n<p>Working on your first Pull Request? You can learn how from this <em>free</em> series\n<a href=\"https://egghead.io/series/how-to-contribute-to-an-open-source-project-on-github\">How to Contribute to an Open Source Project on\nGitHub</a></p>\n</blockquote>\n<h2 id=\"quick-start\" style=\"position:relative;\"><a href=\"#quick-start\" aria-label=\"quick start permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Quick start</h2>\n<p>After you clone your forked repo, follow the following steps to bootstrap your\nlocal environment:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">» <span class=\"token function\">yarn</span> <span class=\"token function\">install</span>\n» <span class=\"token function\">yarn</span> build\n» <span class=\"token function\">yarn</span> <span class=\"token builtin class-name\">test</span>\n» <span class=\"token punctuation\">(</span>cd workspaces/homepage <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">yarn</span> dev<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"code-organization\" style=\"position:relative;\"><a href=\"#code-organization\" aria-label=\"code organization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code organization</h2>\n<p>Confluenza is a monorepo. It consists of a number of packages that all live under the <code class=\"language-text\">workspaces</code> folder. We use a combination of <a href=\"https://lernajs.io\">lerna</a> and <a href=\"https://yarnpkg.com/lang/en/docs/workspaces/\">yarn\nworkspaces</a> to manage them.</p>\n<h2 id=\"workspaces\" style=\"position:relative;\"><a href=\"#workspaces\" aria-label=\"workspaces permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Workspaces</h2>\n<p>Confluenza monorepo currently uses a number of workspaces described below.</p>\n<h3 id=\"confluenza\" style=\"position:relative;\"><a href=\"#confluenza\" aria-label=\"confluenza permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>confluenza</h3>\n<p>This workspace holds the code for the navigation menu allowing to conveniently browse through markdown documents managed by Confluenza. It is an npm package (<code class=\"language-text\">@confluenza/confluenza</code>) that is then used by the <code class=\"language-text\">gatsby-theme-confluenza</code> workspace described below. Although it has a peer dependency to <code class=\"language-text\">gatsby</code>, it is independent of Gatsby build system and it does not hold any GraphQL queries.</p>\n<h3 id=\"gatsby-theme-confluenza\" style=\"position:relative;\"><a href=\"#gatsby-theme-confluenza\" aria-label=\"gatsby theme confluenza permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-theme-confluenza</h3>\n<p>This is a Gatsby Theme - the core of Confluenza and only direct dependency for any other sites wanting to use Confluenza navigation capability. It is published as <code class=\"language-text\">@confluenza/gatsby-theme-confluenza</code>.</p>\n<p>Gatsby theme is also a fully functional Gatsby site, and so it should be possible to validate changes in the <code class=\"language-text\">gatsby-theme-confluenza</code> by simply running:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> workspace @confluenza/gatsby-theme-confluenza develop</code></pre></div>\n<p>And it was, before we added the <code class=\"language-text\">mdx</code> configuration option. In order to support theme configuration\noptions, the <code class=\"language-text\">gatsby-config.js</code> file needs to export a function. Unfortunately, this makes it impossible\nto ran <code class=\"language-text\">$ yarn workspace @confluenza/gatsby-theme-confluenza develop</code>. Of course, you can still validate\nthe theme through the <code class=\"language-text\">homepage</code> workspace that uses the <code class=\"language-text\">@confluenza/gatsby-theme-confluenza</code> theme, but\nif you still would like to run the theme as a standalone Gatsby site, just make sure that you change\nthe theme's <code class=\"language-text\">gatsby-config.js</code> in such a way that it does not export a function but a plain object.</p>\n<p>When running <code class=\"language-text\">gatsby-theme-confluenza</code> as a standalone Gatsby site, you do not need to create any dummy test data or create test pages. Because our repository is a monorepo, gatsby-theme-confluenza has access to any other document published in the <code class=\"language-text\">homepage</code> workspace. In other words, the only difference between running <code class=\"language-text\">yarn workspace @confluenza/gatsby-theme-confluenza develop</code> and <code class=\"language-text\">yarn workspace homepage develop</code> (realize that <code class=\"language-text\">homepage</code> uses the Confluenza theme), is the index page.</p>\n<h3 id=\"homepage\" style=\"position:relative;\"><a href=\"#homepage\" aria-label=\"homepage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>homepage</h3>\n<p>This is a Gatsby site that uses <code class=\"language-text\">gatsby-theme-confluenza</code>. This is what you see when you visit <code class=\"language-text\">https://confluenza.online</code>.</p>\n<h3 id=\"component-navigator-react\" style=\"position:relative;\"><a href=\"#component-navigator-react\" aria-label=\"component navigator react permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>component-navigator-react</h3>\n<p>A version of <code class=\"language-text\">@confluenza/confluenza</code> but for pure React apps created with <code class=\"language-text\">create-react-app</code>. Thus, no dependency on Gatsby.</p>\n<h3 id=\"demo-component-navigator\" style=\"position:relative;\"><a href=\"#demo-component-navigator\" aria-label=\"demo component navigator permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>demo-component-navigator</h3>\n<p>A demo app using <code class=\"language-text\">@confluenza/component-navigator-react</code> package.</p>\n<h3 id=\"demo-workspace-1-and-demo-workspace-2\" style=\"position:relative;\"><a href=\"#demo-workspace-1-and-demo-workspace-2\" aria-label=\"demo workspace 1 and demo workspace 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>demo-workspace-1 and demo-workspace-2</h3>\n<p>Demonstration workspaces to show that Confluenza makes it easy to make the documentation of every workspace accessible.</p>\n<h3 id=\"design-assets\" style=\"position:relative;\"><a href=\"#design-assets\" aria-label=\"design assets permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>design-assets</h3>\n<p>Most of our design assets live here.</p>\n<h2 id=\"installing-dependencies\" style=\"position:relative;\"><a href=\"#installing-dependencies\" aria-label=\"installing dependencies permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installing dependencies</h2>\n<p>We install all mono-repo dependencies with single top-level <code class=\"language-text\">yarn install</code>.</p>\n<h2 id=\"building-packages\" style=\"position:relative;\"><a href=\"#building-packages\" aria-label=\"building packages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building packages</h2>\n<p>Because our monorepo contains a number of <em>packages</em> under the <code class=\"language-text\">workspaces</code>\ndirectory, some of them may need to be build before they can be published.\nThe build command uses <code class=\"language-text\">lerna</code> in order to trigger the build script\nfor every single workspace. Please use a convenience script <code class=\"language-text\">build</code> defined in the root <code class=\"language-text\">package.json</code>.</p>\n<h3 id=\"run-tests\" style=\"position:relative;\"><a href=\"#run-tests\" aria-label=\"run tests permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run tests</h3>\n<p>We run all the tests from the top level - this is far more efficient\nespecially if the number of workspaces in the monorepo increases:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">» <span class=\"token function\">yarn</span> <span class=\"token builtin class-name\">test</span>\n» <span class=\"token function\">yarn</span> <span class=\"token builtin class-name\">test</span> --no-cache    // good to know this\n» <span class=\"token function\">yarn</span> jest <span class=\"token parameter variable\">--clearCache</span>  // a <span class=\"token function\">nice</span> one</code></pre></div>\n<h2 id=\"babel-7\" style=\"position:relative;\"><a href=\"#babel-7\" aria-label=\"babel 7 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Babel 7</h2>\n<p>We use Babel 7.</p>\n<p>Babel 7 has changed in how babel configuration is discovered.</p>\n<p>It allows three different configuration files: <code class=\"language-text\">babel.config.js</code>,\n<code class=\"language-text\">.babelrc.js</code>, and the familiar <code class=\"language-text\">.babelrc</code>. The semantics of file\ndiscovery have changed. If <code class=\"language-text\">babel.config.js</code> is present at your\ncurrent working directory, only this file will be used and <code class=\"language-text\">.babelrc</code>\nand <code class=\"language-text\">.babelrc.js</code> will be ignored (and it does not matter if they are\nin your <code class=\"language-text\">cwd</code> or in one of the subfolders).</p>\n<p>If <code class=\"language-text\">babel.config.js</code> is not present, you can decide to either use\n<code class=\"language-text\">.babelrc</code> for static configuration or <code class=\"language-text\">.babelrc.js</code> if you prefer to\nprogrammatically create your configuration. If you use the <code class=\"language-text\">.babelrc</code> variant, please notice that Babel 7 will look for a <code class=\"language-text\">.babelrc</code> in the current directory. If Babel finds\nother <code class=\"language-text\">.babelrc</code> files while transpiling files in a subfolder, it will merge the configurations together.</p>\n<p>Because our packages share the same Babel configuration, we chose\nto create a single top-level <code class=\"language-text\">babel.config.js</code> where we can\nprogrammatically create the configuration based on the <code class=\"language-text\">BABEL_ENV</code> and\n<code class=\"language-text\">NODE_ENV</code> environment variables. The same configuration file is used\nto run jest tests.</p>\n<p>We could not avoid having babel configurations in subfolders because\nthe babel 7 does not continue searching above the first <code class=\"language-text\">package.json</code> that it finds, and we run the <code class=\"language-text\">yarn build</code> command for the packages via top-level <code class=\"language-text\">yarn lerna run build</code>, which means it will be executed from the package folder.</p>\n<p>Fortunately, we are able to reuse the top-level\n<code class=\"language-text\">babel.config.js</code> by having the package-specific <code class=\"language-text\">babel.config.js</code>\nwith just the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">extends</span><span class=\"token operator\">:</span> <span class=\"token string\">'../../babel.config.js'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Alternatively, you can also use <code class=\"language-text\">.babelrc.js</code> with the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> babelConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../../babel.config'</span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> babelConfig</code></pre></div>\n<blockquote>\n<p>In this case, make sure that you do not use the <code class=\"language-text\">--no-babelrc</code></p>\n</blockquote>\n<p>option in any of the babel commands in the <code class=\"language-text\">tools/build.js</code> top-level\nscript.</p>\n<p>So to summarize, we have a top-level <code class=\"language-text\">babel.config.js</code> and then for each package that we intend to publish to npm registry or which needs a custom babel configuration we have a <code class=\"language-text\">babel.config.js</code> file in the corresponding folder.</p>\n<blockquote>\n<p>Please notice that we run tests from the top-running of the tests is nicely handled by the top-level <code class=\"language-text\">babel.config.js</code>.</p>\n</blockquote>\n<h3 id=\"read-more-about-babel\" style=\"position:relative;\"><a href=\"#read-more-about-babel\" aria-label=\"read more about babel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Read more about babel</h3>\n<p>In order to get a better grip on Babel 7 and how does it handle configuration files in version 7,\nplease refer to the following documents:</p>\n<ol>\n<li><a href=\"https://babeljs.io/docs/en/configuration\">Configure Babel</a></li>\n<li><a href=\"https://babeljs.io/docs/en/config-files\">Config Files</a></li>\n</ol>\n<h2 id=\"staying-in-sync-with-upstream\" style=\"position:relative;\"><a href=\"#staying-in-sync-with-upstream\" aria-label=\"staying in sync with upstream permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Staying in sync with upstream</h2>\n<p>You can follow the steps described in <a href=\"https://help.github.com/articles/syncing-a-fork/\">Syncing a\nfork</a>. We recommend that you\nkeep your local master branch pointing to the upstream master branch. Remaining\nin sync then becomes really easy:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> upstream https://github.com/confluenza/confluenza.git\n<span class=\"token function\">git</span> fetch upstream\n<span class=\"token function\">git</span> branch --set-upstream-to<span class=\"token operator\">=</span>upstream/master master</code></pre></div>\n<p>Now, when you do <code class=\"language-text\">git pull</code> from your local <code class=\"language-text\">master</code> branch git will\nfetch changes from the <code class=\"language-text\">upstream</code> remote. Then you can make all of\nyour pull request branches based on this <code class=\"language-text\">master</code> branch.</p>\n<h2 id=\"submitting-a-pull-request\" style=\"position:relative;\"><a href=\"#submitting-a-pull-request\" aria-label=\"submitting a pull request permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Submitting a Pull Request</h2>\n<p>Please go through existing issues and pull requests to check if\nsomebody else is already working on it, we use <code class=\"language-text\">someone working on it</code>\nlabel to mark such issues.</p>\n<p>Also, make sure to check if all packages build and that the tests pass before you commit your changes.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> build <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">yarn</span> <span class=\"token builtin class-name\">test</span></code></pre></div>\n<p>Finally, when you rebase, please use <code class=\"language-text\">--force-with-lease</code> instead of bare <code class=\"language-text\">--force</code>.</p>\n<h2 id=\"creating-releases\" style=\"position:relative;\"><a href=\"#creating-releases\" aria-label=\"creating releases permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating releases</h2>\n<p>We define a release as a sequence of Pull Requests. When creating a pull request that\nshould be part of a next release, we add one of the following labels to it:</p>\n<ul>\n<li>PR: Breaking Change 💣,</li>\n<li>PR: New Feature 🚀,</li>\n<li>PR: Enhancement 😻,</li>\n<li>PR: Bug Fix 🐛,</li>\n<li>PR: Documentation 📖</li>\n</ul>\n<p>Some discipline is required to make sure that a pull request is focused on one of the above\nmentioned categories. One can say that our releases are pull-request-oriented rather than commit oriented.\nThis allows us to have enough information and structure while leaving a level of freedom. This is in contrast to so-called <em>conventional commits</em>, where each commit must adhere to a set of predefined formatting rules. We find this restriction an inconvenience.</p>\n<p>We use <a href=\"https://www.npmjs.com/package/lerna-changelog\">lerna-changelog</a> to have some level of automation, so that not everything needs to be done by hand. We describe the process of creating a release below.</p>\n<h3 id=\"publishing-packages\" style=\"position:relative;\"><a href=\"#publishing-packages\" aria-label=\"publishing packages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Publishing packages</h3>\n<p>Because we have consciously chosen to have one version for all our packages, it is important to run <code class=\"language-text\">lerna publish</code> with <code class=\"language-text\">--force-publish</code> option:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> lerna publish --force-publish</code></pre></div>\n<p>This will not only remove confusion among our users, but will also make releases easier to follow.</p>\n<h3 id=\"updating-changelogmd\" style=\"position:relative;\"><a href=\"#updating-changelogmd\" aria-label=\"updating changelogmd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Updating CHANGELOG.md</h3>\n<p>After packages are published and all relevant Pull Requests are merged to the master branch, we run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> lerna-changelog <span class=\"token parameter variable\">--from</span><span class=\"token operator\">=</span>vx.y.z <span class=\"token parameter variable\">--to</span><span class=\"token operator\">=</span>vX.Y.Z</code></pre></div>\n<p>where <code class=\"language-text\">vx.y.z</code> refers to the release tag preceding the most recent tag <code class=\"language-text\">vX.Y.Z</code>. Foe example, if last release was tagged <code class=\"language-text\">v1.0.18</code> and the tag for the candidate release already merged and pushed to master is <code class=\"language-text\">v1.0.19</code>, then the command would be:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> lerna-changelog <span class=\"token parameter variable\">--from</span><span class=\"token operator\">=</span>v1.0.18 <span class=\"token parameter variable\">--to</span><span class=\"token operator\">=</span>v1.0.19</code></pre></div>\n<p>The output of this command should be then manually prepended to <code class=\"language-text\">CHANGELOG.md</code> and pushed to the master branch.</p>\n<h3 id=\"draft-a-new-release\" style=\"position:relative;\"><a href=\"#draft-a-new-release\" aria-label=\"draft a new release permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Draft a new release</h3>\n<p>On github, use <em>Draft a new release</em> using the output of the <code class=\"language-text\">lerna-changelog</code> command as the input.\nAdjust the fields so that the new release follows the structure of previous releases (unless a new formatting is desired).</p>\n<h3 id=\"read-more-about-releasing-code\" style=\"position:relative;\"><a href=\"#read-more-about-releasing-code\" aria-label=\"read more about releasing code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Read more about releasing code</h3>\n<ul>\n<li><a href=\"https://github.com/lerna/lerna-changelog\">lerna-changelog</a></li>\n<li><a href=\"https://medium.com/angular-in-depth/release-management-in-angular-with-lerna-21b4ab417c59\">using conventional commits with lerna</a></li>\n<li><a href=\"https://semantic-release.gitbook.io/semantic-release/\">semantic-release</a></li>\n<li><a href=\"https://github.com/semantic-release/semantic-release/issues/193\">semantic-release and monorepos discussion</a></li>\n</ul>","fileAbsolutePath":"/home/runner/work/confluenza/confluenza/CONTRIBUTING.md"}}}},"mdx":null},"pageContext":{"templatePath":"/developers/contributing"}},"staticQueryHashes":["1639663795"],"slicesMap":{}}
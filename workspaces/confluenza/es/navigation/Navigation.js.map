{"version":3,"sources":["../../source/navigation/Navigation.js"],"names":["React","TopLevelNavigationItem","NavigationItem","List","Navigation","props","otherDeltas","userDeltas","developerDeltas","demo1Deltas","demo2Deltas","window","restoredState","readNavigationState","console","log","state","clearNavigationState","stateJSON","localStorage","getItem","validNavigationState","clear","JSON","parse","restoredStateKeys","Object","keys","currentStateKeys","every","e","includes","undefined","title","tag","deltaGroupName","docs","filter","d","node","frontmatter","deltas","length","reduce","acc","val","filtered","path","location","pathname","replace","group","index","map","setState","top","addedContentHeight","navigationElementTotalHeight","clientHeight","scrollerRef","current","requiredHeight","currentHeight","scrollTop","scrollAmount","setTimeout","requiredScroll","calculateRequiredScroll","scrollBy","el","Number","RegExp","exec","getComputedStyle","height","delta","element","triggerElement","getElementHeight","updateScrollPosition","offsetTop","updateDeltas","topLevelNavigationItemChanged","isActive","aggregateDeltas","doc","i","midLevelNavigationItemChanged","clearTimeout","scrollTimer","Math","max","min","scrollHeight","createRef","restoreNavigationState","navigationGroups","createNavigationGroupForTag","setItem","stringify","onScroll","overflowY","position","WebkitOverflowScrolling","width","background","g","renderNavigationGroup","PureComponent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport styled from '@emotion/styled'\n\nimport { TopLevelNavigationItem } from './top-level-navigation-item'\nimport { NavigationItem } from './NavigationItem'\n\nconst List = styled.ul({\n  listStyle: 'none',\n  paddingTop: '0.5rem',\n  paddingBottom: 0,\n  margin: 0\n})\n\nexport class Navigation extends React.PureComponent {\n  state = {\n    otherDeltas: [],\n    userDeltas: [],\n    developerDeltas: [],\n    demo1Deltas: [],\n    demo2Deltas: []\n  }\n\n  navigationGroups\n\n  constructor (props) {\n    super(props)\n\n    this.scrollerRef = React.createRef()\n\n    this.restoreNavigationState()\n\n    this.navigationGroups = [\n      this.createNavigationGroupForTag({\n        title: 'User Documentation',\n        tag: 'user',\n        deltaGroupName: 'user'\n      }),\n      this.createNavigationGroupForTag({\n        title: 'Developer Documentation',\n        tag: 'developer',\n        deltaGroupName: 'developer'\n      }),\n      this.createNavigationGroupForTag({\n        title: 'Other Documents',\n        tag: 'other',\n        deltaGroupName: 'other'\n      }),\n      this.createNavigationGroupForTag({\n        title: 'Demo Workspace 1',\n        tag: 'demo1',\n        deltaGroupName: 'demo1'\n      }),\n      this.createNavigationGroupForTag({\n        title: 'Demo Workspace 2',\n        tag: 'demo2',\n        deltaGroupName: 'demo2'\n      })\n    ]\n  }\n\n  restoreNavigationState = () => {\n    if (typeof window !== 'undefined') {\n      const restoredState = this.readNavigationState()\n      if (restoredState) {\n        console.log('Restoring navigation state')\n        // eslint-disable-next-line\n        this.state = restoredState\n      } else {\n        console.log('[New Site!]: clearing persisted navigation state')\n        this.clearNavigationState()\n      }\n    }\n  }\n\n  readNavigationState = () => {\n    const stateJSON = window.localStorage.getItem('navigation')\n    return this.validNavigationState(stateJSON)\n  }\n\n  clearNavigationState = () => {\n    window.localStorage.clear()\n  }\n\n  validNavigationState = stateJSON => {\n    if (stateJSON) {\n      const restoredState = JSON.parse(stateJSON)\n      const restoredStateKeys = Object.keys(restoredState)\n      const currentStateKeys = Object.keys(this.state)\n      if (currentStateKeys.every(e => restoredStateKeys.includes(e))) {\n        return restoredState\n      }\n    }\n    return undefined\n  }\n\n  createNavigationGroupForTag = ({ title, tag, deltaGroupName }) => {\n    return {\n      title,\n      docs: this.props.docs.filter(d => d.node.frontmatter.tag === tag),\n      tag,\n      deltaGroupName\n    }\n  }\n\n  aggregateDeltas = deltas => {\n    if (deltas.length > 0) {\n      return deltas.reduce((acc, val) => acc + val)\n    }\n    return 0\n  }\n\n  isActive = docs => {\n    if (docs && docs.length > 0) {\n      const filtered = docs.filter(d => d.node.frontmatter.path === this.props.location.pathname.replace(/\\/$/, ''))\n      return filtered.length > 0\n    }\n    return false\n  }\n\n  updateDeltas = (group, index, d) => {\n    let deltas = [...this.state[`${group}Deltas`]]\n    deltas[index] = d\n    deltas = [...deltas].map(d => {\n      if (d === undefined) {\n        return 0\n      }\n      return d\n    })\n    this.setState({ [`${group}Deltas`]: deltas })\n  }\n\n  calculateRequiredScroll = ({ top, addedContentHeight, navigationElementTotalHeight }) => {\n    const clientHeight = this.scrollerRef.current.clientHeight\n    const requiredHeight = top + navigationElementTotalHeight + addedContentHeight\n    const currentHeight = clientHeight + this.scrollerRef.current.scrollTop\n    return requiredHeight - currentHeight\n  }\n\n  scrollBy = scrollAmount => {\n    this.scrollerRef.current.scrollTop += scrollAmount\n  }\n\n  updateScrollPosition = ({ top, addedContentHeight, navigationElementTotalHeight }) => {\n    if (addedContentHeight > 0 && this.scrollerRef.current) {\n      setTimeout(() => {\n        const requiredScroll = this.calculateRequiredScroll({\n          top,\n          addedContentHeight,\n          navigationElementTotalHeight\n        })\n        if (requiredScroll > 0) {\n          this.scrollBy(requiredScroll)\n        }\n      }, 500)\n    }\n  }\n\n  getElementHeight = el => {\n    if (typeof window !== 'undefined') {\n      return Number(RegExp(/\\d+/).exec(window.getComputedStyle(el).height)[0])\n    }\n    return 0\n  }\n\n  topLevelNavigationItemChanged = (delta, element, triggerElement) => {\n    const navigationElementTotalHeight = this.getElementHeight(triggerElement)\n    this.updateScrollPosition({\n      top: element.offsetTop,\n      addedContentHeight: delta,\n      navigationElementTotalHeight\n    })\n  }\n\n  midLevelNavigationItemChanged = (group, index, delta, element, triggerElement) => {\n    this.updateDeltas(group, index, delta)\n\n    const navigationElementTotalHeight = this.getElementHeight(triggerElement)\n\n    this.updateScrollPosition({\n      top: element.offsetTop,\n      addedContentHeight: delta,\n      navigationElementTotalHeight\n    })\n  }\n\n  renderNavigationGroup = group => (\n    <TopLevelNavigationItem\n      key={group.tag}\n      tag={group.tag}\n      title={group.title}\n      onChange={(delta, el, triggerElement) => this.topLevelNavigationItemChanged(delta, el, triggerElement)}\n      active={this.isActive(group.docs)}\n      delta={this.aggregateDeltas(this.state[`${group.deltaGroupName}Deltas`])}>\n      <div>\n        <List>\n          {\n            group.docs.map((doc, i) => (\n              <NavigationItem\n                key={i}\n                location={this.props.location}\n                {...doc}\n                onChange={(delta, el, triggerElement) =>\n                  this.midLevelNavigationItemChanged(group.deltaGroupName, i, delta, el, triggerElement)\n                } />\n            ))\n          }\n        </List>\n      </div>\n    </TopLevelNavigationItem>\n  )\n\n  componentDidMount () {\n    this.scrollerRef.current.scrollTop = Math.max(1, Math.min(this.scrollerRef.current.scrollTop, this.scrollerRef.current.scrollHeight - this.scrollerRef.current.clientHeight - 1))\n  }\n\n  componentDidUpdate () {\n    if (typeof window !== 'undefined') {\n      window.localStorage.setItem('navigation', JSON.stringify(this.state))\n    }\n  }\n\n  // This is insane, but seem to do miracles on iOS: https://stackoverflow.com/a/51998690/1272679\n  onScroll = e => {\n    clearTimeout(this.scrollTimer)\n    this.scrollTimer = setTimeout(() => {\n      if (this.scrollerRef.current) {\n        this.scrollerRef.current.scrollTop = Math.max(1, Math.min(this.scrollerRef.current.scrollTop, this.scrollerRef.current.scrollHeight - this.scrollerRef.current.clientHeight - 1))\n      }\n    }, 200)\n  }\n\n  render () {\n    return (\n      <div onScroll={this.onScroll} ref={this.scrollerRef} css={{\n        overflowY: 'auto',\n        position: 'relative',\n        height: 'calc(100% - 20px - 2rem - 1.8rem - 98px)',\n        '@media (orientation: landscape)': {\n          height: 'calc(100% - 20px - 2rem - 1.8rem - 70px)'\n        },\n        WebkitOverflowScrolling: `touch`,\n        '::-webkit-scrollbar': {\n          width: `6px`,\n          height: `6px`\n        },\n        '::-webkit-scrollbar-thumb': {\n          background: '#ccc'\n        }\n      }}>\n        { this.navigationGroups.map(g => this.renderNavigationGroup(g))}\n      </div>\n    )\n  }\n}\n"],"file":"Navigation.js"}
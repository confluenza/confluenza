{"version":3,"sources":["../../source/navigation/Collapsable.js"],"names":["React","Collapsable","props","folded","delta","style","display","flexFlow","alignItems","justifyContent","maxHeight","overflow","transition","state","onChange","divRef","current","scrollHeight","wrapperRef","setState","window","localStorage","setItem","id","JSON","stringify","stateJSON","getItem","parse","createRef","actualHeight","restoredHeight","Number","RegExp","exec","prevProps","trigger","unfold","children","Component"],"mappings":"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","sourcesContent":["import React from 'react'\n\nclass Collapsable extends React.Component {\n  state = {\n    folded: true,\n    delta: 0,\n    style: {\n      display: 'flex',\n      flexFlow: 'column nowrap',\n      alignItems: 'flex-start',\n      justifyContent: 'flex-start',\n      maxHeight: 0,\n      overflow: 'hidden',\n      transition: 'max-height 0.2s ease-out'\n    }\n  }\n\n  constructor (props) {\n    super(props)\n    if (typeof window !== 'undefined') {\n      const stateJSON = localStorage.getItem(props.id)\n      if (stateJSON) {\n        this.state = JSON.parse(stateJSON)\n      }\n    }\n    this.divRef = React.createRef()\n    this.wrapperRef = React.createRef()\n  }\n\n  componentDidMount () {\n    const actualHeight = this.divRef.current.scrollHeight\n    const restoredHeight = Number(RegExp(/\\d+/).exec(this.state.style.maxHeight)[0])\n    if (restoredHeight > 0 && restoredHeight < actualHeight) {\n      this.props.onChange && this.props.onChange(actualHeight, this.wrapperRef.current)\n      this.setState({\n        style: {\n          ...this.state.style,\n          maxHeight: `${actualHeight}px`\n        }\n      }, () => {\n        if (typeof window !== 'undefined') {\n          localStorage.setItem(this.props.id, JSON.stringify(this.state))\n        }\n      })\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (this.props.delta !== prevProps.delta) {\n      if (!this.state.folded) {\n        this.setState({\n          delta: this.props.delta,\n          style: {\n            ...this.state.style,\n            maxHeight: `${this.divRef.current.scrollHeight + this.props.delta}px`\n          }\n        }, () => {\n          if (typeof window !== 'undefined') {\n            localStorage.setItem(this.props.id, JSON.stringify(this.state))\n          }\n        })\n      }\n    }\n  }\n\n  unfold = () => {\n    if (this.state.folded) {\n      this.props.onChange && this.props.onChange(this.divRef.current.scrollHeight, this.wrapperRef.current)\n      this.setState({\n        folded: false,\n        style: {\n          ...this.state.style,\n          maxHeight: `${this.divRef.current.scrollHeight}px`\n        }\n      }, () => {\n        if (typeof window !== 'undefined') {\n          localStorage.setItem(this.props.id, JSON.stringify(this.state))\n        }\n      })\n    } else {\n      this.props.onChange && this.props.onChange(0, this.wrapperRef.current)\n      this.setState({\n        folded: true,\n        style: {\n          ...this.state.style,\n          maxHeight: 0\n        }\n      }, () => {\n        if (typeof window !== 'undefined') {\n          localStorage.setItem(this.props.id, JSON.stringify(this.state))\n        }\n      })\n    }\n  }\n\n  render () {\n    return (\n      <div ref={this.wrapperRef}>\n        { this.props.trigger(this.unfold, this.state.folded) }\n        <div style={this.state.style} ref={this.divRef}>\n          { this.props.children }\n        </div>\n      </div>\n    )\n  }\n}\n\nexport { Collapsable }\n"],"file":"Collapsable.js"}